language: python
sudo: required
group: edge
addons:
  apt:
    packages:
      - python-dev
      - libmysqlclient-dev
python:
  - pypy
  - 2.7
  # - pypy3
  # - 3.3
  # - 3.4
  # - 3.5
install:
  - pip install -r requirements/tests.txt
env:
  - >-
    APP_CONFIG="config.TestingConfig"
addons:
  - mariadb: '10.0'
before_script:
  - mysql -e 'CREATE DATABASE geokrety_test;'
  - mysql -e 'CREATE DATABASE geokrety_unittest;'
  - export DATABASE_URL=mysql+mysqldb://root@localhost/geokrety_test
  - export TEST_DATABASE_URL=mysql+mysqldb://root@localhost/geokrety_unittest
script:
  - nosetests tests/unittests -v --with-coverage
after_success:
  - 'bash <(curl -s https://codecov.io/bash)'
